<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>cargo-slicer Benchmark Comparison</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #f8f9fa; color: #333; padding: 20px;
    max-width: 1600px; margin: 0 auto;
  }
  h1 { font-size: 1.6em; margin-bottom: 6px; color: #1a1a2e; }
  .subtitle { color: #666; font-size: 0.9em; margin-bottom: 20px; }
  .controls {
    display: flex; gap: 16px; align-items: center;
    background: #fff; padding: 14px 18px; border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;
    flex-wrap: wrap;
  }
  .controls label { font-weight: 600; font-size: 0.85em; color: #555; }
  .controls select {
    padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px;
    font-size: 0.9em; background: #fff; min-width: 180px;
  }
  .summary-bar {
    background: #fff; padding: 12px 18px; border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;
    display: flex; gap: 24px; flex-wrap: wrap;
  }
  .summary-item { text-align: center; }
  .summary-item .label { font-size: 0.75em; color: #888; text-transform: uppercase; letter-spacing: 0.5px; }
  .summary-item .value { font-size: 1.3em; font-weight: 700; }
  table {
    width: 100%; border-collapse: collapse; background: #fff;
    border-radius: 8px; overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;
  }
  th {
    background: #2d3748; color: #fff; padding: 10px 14px;
    font-size: 0.8em; text-transform: uppercase; letter-spacing: 0.5px;
    text-align: left; white-space: nowrap; cursor: pointer; user-select: none;
  }
  th:hover { background: #4a5568; }
  td { padding: 8px 14px; border-bottom: 1px solid #eee; font-size: 0.9em; white-space: nowrap; }
  tr:hover td { background: #f7fafc; }
  .project-name { font-weight: 600; color: #2d3748; }
  .mode-name { color: #666; }
  .num { text-align: right; font-variant-numeric: tabular-nums; }
  .pct { text-align: right; font-weight: 600; font-variant-numeric: tabular-nums; min-width: 70px; }
  .pct.good { color: #22863a; }
  .pct.bad { color: #cb2431; }
  .pct.neutral { color: #888; font-weight: 400; }
  .pct.good-bold { color: #22863a; font-weight: 800; }
  .pct.bad-bold { color: #cb2431; font-weight: 800; }
  .geo-row td { font-weight: 700; background: #edf2f7; border-top: 2px solid #cbd5e0; }
  .no-data { color: #999; font-style: italic; text-align: center; padding: 40px; }
  footer { text-align: center; color: #999; font-size: 0.8em; margin-top: 30px; }
</style>
</head>
<body>
<h1>cargo-slicer Benchmark Comparison</h1>
<p class="subtitle">Compare build performance across runs and modes</p>

<div class="controls">
  <label>Run:</label>
  <select id="sel-run"></select>
  <label>Baseline Mode:</label>
  <select id="sel-base-mode"></select>
  <label>Comparison Mode:</label>
  <select id="sel-comp-mode"></select>
  <label>Metric:</label>
  <select id="sel-sort">
    <option value="wall">Wall Time</option>
    <option value="insn" selected>Instructions</option>
    <option value="cycles">Cycles</option>
    <option value="rss">Peak RSS</option>
  </select>
</div>

<div class="summary-bar" id="summary-bar"></div>
<div id="results"></div>

<footer>
  Generated by cargo-slicer bench_report.py &mdash; inspired by
  <a href="https://perf.rust-lang.org/compare.html">perf.rust-lang.org</a>
</footer>

<script>
const DATA = [{"id": 140, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "baseline", "iteration": 1, "wall_secs": 106.85, "peak_rss_kb": 1337616, "instructions": 3791743082371, "cycles": 4974450665723, "timestamp": "2026-02-08 02:32:29"}, {"id": 141, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "baseline", "iteration": 2, "wall_secs": 103.57, "peak_rss_kb": 1360368, "instructions": 3791995787428, "cycles": 4937370432644, "timestamp": "2026-02-08 02:34:13"}, {"id": 142, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "baseline", "iteration": 3, "wall_secs": 104.88, "peak_rss_kb": 1332248, "instructions": 3791647816039, "cycles": 4900940947181, "timestamp": "2026-02-08 02:35:58"}, {"id": 143, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "vslice-cc", "iteration": 1, "wall_secs": 34.66, "peak_rss_kb": 791304, "instructions": 1214701361481, "cycles": 1521384235006, "timestamp": "2026-02-08 02:36:37"}, {"id": 144, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "vslice-cc", "iteration": 2, "wall_secs": 35.07, "peak_rss_kb": 789220, "instructions": 1214737304935, "cycles": 1523787875456, "timestamp": "2026-02-08 02:37:17"}, {"id": 145, "run_id": "mc-20260208-021212", "project": "bevy", "mode": "vslice-cc", "iteration": 3, "wall_secs": 34.83, "peak_rss_kb": 794724, "instructions": 1214728354440, "cycles": 1494502844736, "timestamp": "2026-02-08 02:37:57"}, {"id": 128, "run_id": "mc-20260208-021212", "project": "helix", "mode": "baseline", "iteration": 1, "wall_secs": 90.62, "peak_rss_kb": 2114976, "instructions": 2243800852445, "cycles": 3299210532068, "timestamp": "2026-02-08 02:16:25"}, {"id": 129, "run_id": "mc-20260208-021212", "project": "helix", "mode": "baseline", "iteration": 2, "wall_secs": 91.65, "peak_rss_kb": 2132572, "instructions": 2243622409392, "cycles": 3308629710845, "timestamp": "2026-02-08 02:17:57"}, {"id": 130, "run_id": "mc-20260208-021212", "project": "helix", "mode": "baseline", "iteration": 3, "wall_secs": 89.4, "peak_rss_kb": 2097752, "instructions": 2243695675625, "cycles": 3288850586175, "timestamp": "2026-02-08 02:19:27"}, {"id": 131, "run_id": "mc-20260208-021212", "project": "helix", "mode": "vslice-cc", "iteration": 1, "wall_secs": 17.4, "peak_rss_kb": 537056, "instructions": 607253896563, "cycles": 914552241281, "timestamp": "2026-02-08 02:19:46"}, {"id": 132, "run_id": "mc-20260208-021212", "project": "helix", "mode": "vslice-cc", "iteration": 2, "wall_secs": 17.08, "peak_rss_kb": 534468, "instructions": 575295752687, "cycles": 857336744242, "timestamp": "2026-02-08 02:20:04"}, {"id": 133, "run_id": "mc-20260208-021212", "project": "helix", "mode": "vslice-cc", "iteration": 3, "wall_secs": 18.19, "peak_rss_kb": 531076, "instructions": 621639737361, "cycles": 936718525637, "timestamp": "2026-02-08 02:20:24"}, {"id": 134, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "baseline", "iteration": 1, "wall_secs": 111.16, "peak_rss_kb": 2817376, "instructions": 3673644832871, "cycles": 5762730921395, "timestamp": "2026-02-08 02:22:15"}, {"id": 135, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "baseline", "iteration": 2, "wall_secs": 109.65, "peak_rss_kb": 2804136, "instructions": 3673220633456, "cycles": 5788218631798, "timestamp": "2026-02-08 02:24:06"}, {"id": 136, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "baseline", "iteration": 3, "wall_secs": 111.16, "peak_rss_kb": 2868576, "instructions": 3673754660989, "cycles": 5792109666331, "timestamp": "2026-02-08 02:25:58"}, {"id": 137, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "vslice-cc", "iteration": 1, "wall_secs": 91.09, "peak_rss_kb": 2182140, "instructions": 3114283585354, "cycles": 4891623962989, "timestamp": "2026-02-08 02:27:33"}, {"id": 138, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "vslice-cc", "iteration": 2, "wall_secs": 89.9, "peak_rss_kb": 2200524, "instructions": 3114219426428, "cycles": 4855135999958, "timestamp": "2026-02-08 02:29:06"}, {"id": 139, "run_id": "mc-20260208-021212", "project": "nushell", "mode": "vslice-cc", "iteration": 3, "wall_secs": 91.24, "peak_rss_kb": 2194648, "instructions": 3113966064499, "cycles": 4906422426250, "timestamp": "2026-02-08 02:30:41"}, {"id": 122, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "baseline", "iteration": 1, "wall_secs": 14.88, "peak_rss_kb": 527924, "instructions": 311420503796, "cycles": 315388650160, "timestamp": "2026-02-08 02:13:41"}, {"id": 123, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "baseline", "iteration": 2, "wall_secs": 14.7, "peak_rss_kb": 528292, "instructions": 311421294564, "cycles": 315495709112, "timestamp": "2026-02-08 02:13:56"}, {"id": 124, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "baseline", "iteration": 3, "wall_secs": 14.75, "peak_rss_kb": 531252, "instructions": 311411525669, "cycles": 316708583683, "timestamp": "2026-02-08 02:14:11"}, {"id": 125, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "vslice-cc", "iteration": 1, "wall_secs": 13.67, "peak_rss_kb": 495212, "instructions": 256968236404, "cycles": 262439057766, "timestamp": "2026-02-08 02:14:26"}, {"id": 126, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "vslice-cc", "iteration": 2, "wall_secs": 13.21, "peak_rss_kb": 494892, "instructions": 256980036640, "cycles": 259506043267, "timestamp": "2026-02-08 02:14:40"}, {"id": 127, "run_id": "mc-20260208-021212", "project": "ripgrep", "mode": "vslice-cc", "iteration": 3, "wall_secs": 13.25, "peak_rss_kb": 491076, "instructions": 256979265311, "cycles": 259909122448, "timestamp": "2026-02-08 02:14:54"}, {"id": 146, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "baseline", "iteration": 1, "wall_secs": 171.92, "peak_rss_kb": 1586928, "instructions": 5722944371411, "cycles": 7282227258247, "timestamp": "2026-02-08 02:40:49"}, {"id": 147, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "baseline", "iteration": 2, "wall_secs": 173.15, "peak_rss_kb": 1577736, "instructions": 5723377869769, "cycles": 7361677151513, "timestamp": "2026-02-08 02:43:43"}, {"id": 148, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "baseline", "iteration": 3, "wall_secs": 170.86, "peak_rss_kb": 1591268, "instructions": 5722860757987, "cycles": 7345577724963, "timestamp": "2026-02-08 02:46:34"}, {"id": 149, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "vslice-cc", "iteration": 1, "wall_secs": 147.3, "peak_rss_kb": 1382820, "instructions": 3330659610427, "cycles": 4136883724010, "timestamp": "2026-02-08 02:49:13"}, {"id": 150, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "vslice-cc", "iteration": 2, "wall_secs": 145.93, "peak_rss_kb": 1405416, "instructions": 3330538244956, "cycles": 4161229478996, "timestamp": "2026-02-08 02:51:50"}, {"id": 151, "run_id": "mc-20260208-021212", "project": "rustc", "mode": "vslice-cc", "iteration": 3, "wall_secs": 148.0, "peak_rss_kb": 1384160, "instructions": 3330411489213, "cycles": 4168380197912, "timestamp": "2026-02-08 02:54:29"}, {"id": 158, "run_id": "mc-20260208-021212", "project": "slicer", "mode": "baseline", "iteration": 1, "wall_secs": 167.31, "peak_rss_kb": 1740308, "instructions": 1096163197082, "cycles": 1162345956466, "timestamp": "2026-02-08 04:13:13"}, {"id": 159, "run_id": "mc-20260208-021212", "project": "slicer", "mode": "baseline", "iteration": 2, "wall_secs": 164.58, "peak_rss_kb": 1676600, "instructions": 1096173295137, "cycles": 1168268256619, "timestamp": "2026-02-08 04:15:58"}, {"id": 160, "run_id": "mc-20260208-021212", "project": "slicer", "mode": "baseline", "iteration": 3, "wall_secs": 167.58, "peak_rss_kb": 1732544, "instructions": 1096184697817, "cycles": 1170803022543, "timestamp": "2026-02-08 04:18:46"}, {"id": 161, "run_id": "mc-20260208-021212", "project": "slicer", "mode": "vslice-cc", "iteration": 1, "wall_secs": 79.11, "peak_rss_kb": 1468780, "instructions": 668869060897, "cycles": 791029099036, "timestamp": "2026-02-08 04:20:07"}, {"id": 152, "run_id": "mc-20260208-021212", "project": "zed", "mode": "baseline", "iteration": 1, "wall_secs": 1022.8, "peak_rss_kb": 22316132, "instructions": 28473551979720, "cycles": 45749859595472, "timestamp": "2026-02-08 03:11:34"}, {"id": 153, "run_id": "mc-20260208-021212", "project": "zed", "mode": "baseline", "iteration": 2, "wall_secs": 1012.17, "peak_rss_kb": 22777032, "instructions": 28479351272429, "cycles": 45485520073823, "timestamp": "2026-02-08 03:28:31"}, {"id": 154, "run_id": "mc-20260208-021212", "project": "zed", "mode": "baseline", "iteration": 3, "wall_secs": 1017.91, "peak_rss_kb": 22566464, "instructions": 28473526693701, "cycles": 45807390954414, "timestamp": "2026-02-08 03:45:32"}, {"id": 155, "run_id": "mc-20260208-021212", "project": "zed", "mode": "vslice-cc", "iteration": 1, "wall_secs": 477.83, "peak_rss_kb": 8571092, "instructions": 12161023531215, "cycles": 19332978471872, "timestamp": "2026-02-08 03:53:47"}, {"id": 156, "run_id": "mc-20260208-021212", "project": "zed", "mode": "vslice-cc", "iteration": 2, "wall_secs": 487.0, "peak_rss_kb": 8649308, "instructions": 12160244551974, "cycles": 19378062426180, "timestamp": "2026-02-08 04:02:08"}, {"id": 157, "run_id": "mc-20260208-021212", "project": "zed", "mode": "vslice-cc", "iteration": 3, "wall_secs": 482.19, "peak_rss_kb": 8614668, "instructions": 12160333665588, "cycles": 19266351240659, "timestamp": "2026-02-08 04:10:25"}, {"id": 2, "run_id": "v1", "project": "perf-bitmaps", "mode": "baseline", "iteration": 1, "wall_secs": 1.8, "peak_rss_kb": 163012, "instructions": 2318411731, "cycles": 1876501045, "timestamp": "2026-02-08 00:52:15"}, {"id": 3, "run_id": "v1", "project": "perf-bitmaps", "mode": "baseline", "iteration": 2, "wall_secs": 0.81, "peak_rss_kb": 163388, "instructions": 2257433143, "cycles": 1827507692, "timestamp": "2026-02-08 00:52:16"}, {"id": 4, "run_id": "v1", "project": "perf-bitmaps", "mode": "baseline", "iteration": 3, "wall_secs": 0.85, "peak_rss_kb": 163660, "instructions": 2257481436, "cycles": 1843486705, "timestamp": "2026-02-08 00:52:17"}, {"id": 62, "run_id": "v1", "project": "perf-bitmaps", "mode": "vslice", "iteration": 1, "wall_secs": 0.93, "peak_rss_kb": 167196, "instructions": 2533485970, "cycles": 2114233287, "timestamp": "2026-02-08 01:12:03"}, {"id": 63, "run_id": "v1", "project": "perf-bitmaps", "mode": "vslice", "iteration": 2, "wall_secs": 0.94, "peak_rss_kb": 167192, "instructions": 2533040683, "cycles": 2142652144, "timestamp": "2026-02-08 01:12:05"}, {"id": 64, "run_id": "v1", "project": "perf-bitmaps", "mode": "vslice", "iteration": 3, "wall_secs": 0.94, "peak_rss_kb": 168180, "instructions": 2533060386, "cycles": 2149311255, "timestamp": "2026-02-08 01:12:06"}, {"id": 5, "run_id": "v1", "project": "perf-cargo", "mode": "baseline", "iteration": 1, "wall_secs": 138.84, "peak_rss_kb": 2339480, "instructions": 2570165701657, "cycles": 3146606326470, "timestamp": "2026-02-08 00:54:36"}, {"id": 6, "run_id": "v1", "project": "perf-cargo", "mode": "baseline", "iteration": 2, "wall_secs": 133.57, "peak_rss_kb": 2313468, "instructions": 2567635334545, "cycles": 3191642070803, "timestamp": "2026-02-08 00:56:50"}, {"id": 7, "run_id": "v1", "project": "perf-cargo", "mode": "baseline", "iteration": 3, "wall_secs": 135.29, "peak_rss_kb": 2330900, "instructions": 2567840115795, "cycles": 3195130668339, "timestamp": "2026-02-08 00:59:06"}, {"id": 65, "run_id": "v1", "project": "perf-cargo", "mode": "vslice", "iteration": 1, "wall_secs": 144.9, "peak_rss_kb": 2853172, "instructions": 2616888393297, "cycles": 3312066802922, "timestamp": "2026-02-08 01:14:31"}, {"id": 66, "run_id": "v1", "project": "perf-cargo", "mode": "vslice", "iteration": 2, "wall_secs": 144.13, "peak_rss_kb": 2850272, "instructions": 2616898204977, "cycles": 3307587312176, "timestamp": "2026-02-08 01:16:56"}, {"id": 67, "run_id": "v1", "project": "perf-cargo", "mode": "vslice", "iteration": 3, "wall_secs": 144.8, "peak_rss_kb": 2856080, "instructions": 2616957894537, "cycles": 3289526777222, "timestamp": "2026-02-08 01:19:21"}, {"id": 8, "run_id": "v1", "project": "perf-clap_derive", "mode": "baseline", "iteration": 1, "wall_secs": 7.68, "peak_rss_kb": 334860, "instructions": 58073246803, "cycles": 52605181098, "timestamp": "2026-02-08 00:59:14"}, {"id": 9, "run_id": "v1", "project": "perf-clap_derive", "mode": "baseline", "iteration": 2, "wall_secs": 7.18, "peak_rss_kb": 329920, "instructions": 58082457483, "cycles": 53170301860, "timestamp": "2026-02-08 00:59:21"}, {"id": 10, "run_id": "v1", "project": "perf-clap_derive", "mode": "baseline", "iteration": 3, "wall_secs": 7.13, "peak_rss_kb": 335128, "instructions": 58095630676, "cycles": 52729637949, "timestamp": "2026-02-08 00:59:28"}, {"id": 68, "run_id": "v1", "project": "perf-clap_derive", "mode": "vslice", "iteration": 1, "wall_secs": 8.52, "peak_rss_kb": 324176, "instructions": 61666958243, "cycles": 58945512412, "timestamp": "2026-02-08 01:19:30"}, {"id": 69, "run_id": "v1", "project": "perf-clap_derive", "mode": "vslice", "iteration": 2, "wall_secs": 7.74, "peak_rss_kb": 325072, "instructions": 61666136849, "cycles": 57336229632, "timestamp": "2026-02-08 01:19:38"}, {"id": 70, "run_id": "v1", "project": "perf-clap_derive", "mode": "vslice", "iteration": 3, "wall_secs": 7.94, "peak_rss_kb": 326280, "instructions": 61653188732, "cycles": 56749445462, "timestamp": "2026-02-08 01:19:46"}, {"id": 11, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "baseline", "iteration": 1, "wall_secs": 32.89, "peak_rss_kb": 997100, "instructions": 270819167594, "cycles": 262596971127, "timestamp": "2026-02-08 01:00:02"}, {"id": 12, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "baseline", "iteration": 2, "wall_secs": 30.59, "peak_rss_kb": 983672, "instructions": 270619379595, "cycles": 263731312015, "timestamp": "2026-02-08 01:00:32"}, {"id": 13, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "baseline", "iteration": 3, "wall_secs": 30.3, "peak_rss_kb": 990664, "instructions": 270750656159, "cycles": 263561266598, "timestamp": "2026-02-08 01:01:03"}, {"id": 71, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "vslice", "iteration": 1, "wall_secs": 33.97, "peak_rss_kb": 1202908, "instructions": 282967565244, "cycles": 281624949766, "timestamp": "2026-02-08 01:20:20"}, {"id": 72, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "vslice", "iteration": 2, "wall_secs": 34.36, "peak_rss_kb": 1180880, "instructions": 282963996365, "cycles": 285970425518, "timestamp": "2026-02-08 01:20:55"}, {"id": 73, "run_id": "v1", "project": "perf-cranelift-codegen", "mode": "vslice", "iteration": 3, "wall_secs": 34.23, "peak_rss_kb": 1200620, "instructions": 282989140239, "cycles": 284998717018, "timestamp": "2026-02-08 01:21:29"}, {"id": 14, "run_id": "v1", "project": "perf-diesel", "mode": "baseline", "iteration": 1, "wall_secs": 22.86, "peak_rss_kb": 637872, "instructions": 75209222356, "cycles": 66152286060, "timestamp": "2026-02-08 01:01:26"}, {"id": 15, "run_id": "v1", "project": "perf-diesel", "mode": "baseline", "iteration": 2, "wall_secs": 21.78, "peak_rss_kb": 639108, "instructions": 75075933206, "cycles": 65826323955, "timestamp": "2026-02-08 01:01:48"}, {"id": 16, "run_id": "v1", "project": "perf-diesel", "mode": "baseline", "iteration": 3, "wall_secs": 21.79, "peak_rss_kb": 639712, "instructions": 75061105371, "cycles": 65591214251, "timestamp": "2026-02-08 01:02:10"}, {"id": 74, "run_id": "v1", "project": "perf-diesel", "mode": "vslice", "iteration": 1, "wall_secs": 25.1, "peak_rss_kb": 670816, "instructions": 79217138991, "cycles": 73667645250, "timestamp": "2026-02-08 01:21:54"}, {"id": 75, "run_id": "v1", "project": "perf-diesel", "mode": "vslice", "iteration": 2, "wall_secs": 24.59, "peak_rss_kb": 670236, "instructions": 79215001428, "cycles": 73267633447, "timestamp": "2026-02-08 01:22:19"}, {"id": 76, "run_id": "v1", "project": "perf-diesel", "mode": "vslice", "iteration": 3, "wall_secs": 23.27, "peak_rss_kb": 669428, "instructions": 79220013722, "cycles": 68918288128, "timestamp": "2026-02-08 01:22:43"}, {"id": 17, "run_id": "v1", "project": "perf-eza", "mode": "baseline", "iteration": 1, "wall_secs": 52.55, "peak_rss_kb": 418572, "instructions": 519985021071, "cycles": 580858173713, "timestamp": "2026-02-08 01:03:03"}, {"id": 18, "run_id": "v1", "project": "perf-eza", "mode": "baseline", "iteration": 2, "wall_secs": 48.6, "peak_rss_kb": 420232, "instructions": 519534544140, "cycles": 583917837441, "timestamp": "2026-02-08 01:03:52"}, {"id": 19, "run_id": "v1", "project": "perf-eza", "mode": "baseline", "iteration": 3, "wall_secs": 49.85, "peak_rss_kb": 420152, "instructions": 519463181409, "cycles": 585419780466, "timestamp": "2026-02-08 01:04:42"}, {"id": 77, "run_id": "v1", "project": "perf-eza", "mode": "vslice", "iteration": 1, "wall_secs": 53.91, "peak_rss_kb": 572808, "instructions": 524823155658, "cycles": 609425706892, "timestamp": "2026-02-08 01:23:37"}, {"id": 78, "run_id": "v1", "project": "perf-eza", "mode": "vslice", "iteration": 2, "wall_secs": 53.12, "peak_rss_kb": 572840, "instructions": 524863859925, "cycles": 598137687361, "timestamp": "2026-02-08 01:24:31"}, {"id": 79, "run_id": "v1", "project": "perf-eza", "mode": "vslice", "iteration": 3, "wall_secs": 54.16, "peak_rss_kb": 572116, "instructions": 524826929814, "cycles": 619110716337, "timestamp": "2026-02-08 01:25:26"}, {"id": 20, "run_id": "v1", "project": "perf-helloworld", "mode": "baseline", "iteration": 1, "wall_secs": 0.17, "peak_rss_kb": 87400, "instructions": 196771710, "cycles": 162888038, "timestamp": "2026-02-08 01:04:42"}, {"id": 21, "run_id": "v1", "project": "perf-helloworld", "mode": "baseline", "iteration": 2, "wall_secs": 0.17, "peak_rss_kb": 89352, "instructions": 196740903, "cycles": 163520553, "timestamp": "2026-02-08 01:04:42"}, {"id": 22, "run_id": "v1", "project": "perf-helloworld", "mode": "baseline", "iteration": 3, "wall_secs": 0.17, "peak_rss_kb": 87224, "instructions": 196773772, "cycles": 163373048, "timestamp": "2026-02-08 01:04:43"}, {"id": 80, "run_id": "v1", "project": "perf-helloworld", "mode": "vslice", "iteration": 1, "wall_secs": 0.2, "peak_rss_kb": 102136, "instructions": 215575495, "cycles": 192309802, "timestamp": "2026-02-08 01:25:26"}, {"id": 81, "run_id": "v1", "project": "perf-helloworld", "mode": "vslice", "iteration": 2, "wall_secs": 0.2, "peak_rss_kb": 102324, "instructions": 215481283, "cycles": 194435683, "timestamp": "2026-02-08 01:25:27"}, {"id": 82, "run_id": "v1", "project": "perf-helloworld", "mode": "vslice", "iteration": 3, "wall_secs": 0.38, "peak_rss_kb": 102264, "instructions": 215543411, "cycles": 193551020, "timestamp": "2026-02-08 01:25:27"}, {"id": 23, "run_id": "v1", "project": "perf-html5ever", "mode": "baseline", "iteration": 1, "wall_secs": 6.33, "peak_rss_kb": 299396, "instructions": 43733486767, "cycles": 43584992694, "timestamp": "2026-02-08 01:04:49"}, {"id": 24, "run_id": "v1", "project": "perf-html5ever", "mode": "baseline", "iteration": 2, "wall_secs": 5.59, "peak_rss_kb": 302100, "instructions": 43665018844, "cycles": 42567610491, "timestamp": "2026-02-08 01:04:55"}, {"id": 25, "run_id": "v1", "project": "perf-html5ever", "mode": "baseline", "iteration": 3, "wall_secs": 5.4, "peak_rss_kb": 299024, "instructions": 43674311680, "cycles": 42778271824, "timestamp": "2026-02-08 01:05:01"}, {"id": 83, "run_id": "v1", "project": "perf-html5ever", "mode": "vslice", "iteration": 1, "wall_secs": 6.17, "peak_rss_kb": 298096, "instructions": 44184586944, "cycles": 44538908762, "timestamp": "2026-02-08 01:25:34"}, {"id": 84, "run_id": "v1", "project": "perf-html5ever", "mode": "vslice", "iteration": 2, "wall_secs": 5.62, "peak_rss_kb": 298996, "instructions": 44174030482, "cycles": 43481792883, "timestamp": "2026-02-08 01:25:39"}, {"id": 85, "run_id": "v1", "project": "perf-html5ever", "mode": "vslice", "iteration": 3, "wall_secs": 5.65, "peak_rss_kb": 299076, "instructions": 44186461758, "cycles": 43414887942, "timestamp": "2026-02-08 01:25:45"}, {"id": 26, "run_id": "v1", "project": "perf-hyper", "mode": "baseline", "iteration": 1, "wall_secs": 12.26, "peak_rss_kb": 323284, "instructions": 57032166580, "cycles": 59295539715, "timestamp": "2026-02-08 01:05:13"}, {"id": 27, "run_id": "v1", "project": "perf-hyper", "mode": "baseline", "iteration": 2, "wall_secs": 10.71, "peak_rss_kb": 323124, "instructions": 56782417794, "cycles": 59627506586, "timestamp": "2026-02-08 01:05:24"}, {"id": 28, "run_id": "v1", "project": "perf-hyper", "mode": "baseline", "iteration": 3, "wall_secs": 10.7, "peak_rss_kb": 323196, "instructions": 56768637433, "cycles": 59627022172, "timestamp": "2026-02-08 01:05:35"}, {"id": 86, "run_id": "v1", "project": "perf-hyper", "mode": "vslice", "iteration": 1, "wall_secs": 11.98, "peak_rss_kb": 322884, "instructions": 57787599765, "cycles": 63797404472, "timestamp": "2026-02-08 01:25:57"}, {"id": 87, "run_id": "v1", "project": "perf-hyper", "mode": "vslice", "iteration": 2, "wall_secs": 11.73, "peak_rss_kb": 322756, "instructions": 57788544543, "cycles": 64274236833, "timestamp": "2026-02-08 01:26:09"}, {"id": 88, "run_id": "v1", "project": "perf-hyper", "mode": "vslice", "iteration": 3, "wall_secs": 11.43, "peak_rss_kb": 323128, "instructions": 57772659522, "cycles": 62838036363, "timestamp": "2026-02-08 01:26:21"}, {"id": 29, "run_id": "v1", "project": "perf-image", "mode": "baseline", "iteration": 1, "wall_secs": 28.62, "peak_rss_kb": 774716, "instructions": 542667883634, "cycles": 535326299796, "timestamp": "2026-02-08 01:06:04"}, {"id": 30, "run_id": "v1", "project": "perf-image", "mode": "baseline", "iteration": 2, "wall_secs": 27.42, "peak_rss_kb": 774220, "instructions": 542624158391, "cycles": 537716230205, "timestamp": "2026-02-08 01:06:32"}, {"id": 31, "run_id": "v1", "project": "perf-image", "mode": "baseline", "iteration": 3, "wall_secs": 27.26, "peak_rss_kb": 785932, "instructions": 542619504798, "cycles": 533322193599, "timestamp": "2026-02-08 01:06:59"}, {"id": 89, "run_id": "v1", "project": "perf-image", "mode": "vslice", "iteration": 1, "wall_secs": 28.74, "peak_rss_kb": 854132, "instructions": 555862414427, "cycles": 557853162426, "timestamp": "2026-02-08 01:26:50"}, {"id": 90, "run_id": "v1", "project": "perf-image", "mode": "vslice", "iteration": 2, "wall_secs": 30.07, "peak_rss_kb": 851924, "instructions": 555792232682, "cycles": 567479722242, "timestamp": "2026-02-08 01:27:21"}, {"id": 91, "run_id": "v1", "project": "perf-image", "mode": "vslice", "iteration": 3, "wall_secs": 29.2, "peak_rss_kb": 843908, "instructions": 555779467275, "cycles": 559216703460, "timestamp": "2026-02-08 01:27:50"}, {"id": 32, "run_id": "v1", "project": "perf-libc", "mode": "baseline", "iteration": 1, "wall_secs": 0.96, "peak_rss_kb": 163568, "instructions": 2241486410, "cycles": 1897886716, "timestamp": "2026-02-08 01:07:01"}, {"id": 33, "run_id": "v1", "project": "perf-libc", "mode": "baseline", "iteration": 2, "wall_secs": 0.94, "peak_rss_kb": 163616, "instructions": 2241566644, "cycles": 1885432495, "timestamp": "2026-02-08 01:07:02"}, {"id": 34, "run_id": "v1", "project": "perf-libc", "mode": "baseline", "iteration": 3, "wall_secs": 0.96, "peak_rss_kb": 163612, "instructions": 2241327563, "cycles": 1920744482, "timestamp": "2026-02-08 01:07:03"}, {"id": 92, "run_id": "v1", "project": "perf-libc", "mode": "vslice", "iteration": 1, "wall_secs": 1.07, "peak_rss_kb": 168044, "instructions": 2625628957, "cycles": 2168831538, "timestamp": "2026-02-08 01:27:51"}, {"id": 93, "run_id": "v1", "project": "perf-libc", "mode": "vslice", "iteration": 2, "wall_secs": 1.07, "peak_rss_kb": 167844, "instructions": 2625438324, "cycles": 2173486298, "timestamp": "2026-02-08 01:27:53"}, {"id": 94, "run_id": "v1", "project": "perf-libc", "mode": "vslice", "iteration": 3, "wall_secs": 1.16, "peak_rss_kb": 168100, "instructions": 2625470374, "cycles": 2365811128, "timestamp": "2026-02-08 01:27:54"}, {"id": 35, "run_id": "v1", "project": "perf-nalgebra", "mode": "baseline", "iteration": 1, "wall_secs": 19.29, "peak_rss_kb": 502408, "instructions": 80213774770, "cycles": 76688945226, "timestamp": "2026-02-08 01:07:22"}, {"id": 36, "run_id": "v1", "project": "perf-nalgebra", "mode": "baseline", "iteration": 2, "wall_secs": 17.61, "peak_rss_kb": 502108, "instructions": 80024575897, "cycles": 76972570188, "timestamp": "2026-02-08 01:07:40"}, {"id": 37, "run_id": "v1", "project": "perf-nalgebra", "mode": "baseline", "iteration": 3, "wall_secs": 17.02, "peak_rss_kb": 504064, "instructions": 80035073079, "cycles": 75971155653, "timestamp": "2026-02-08 01:07:58"}, {"id": 95, "run_id": "v1", "project": "perf-nalgebra", "mode": "vslice", "iteration": 1, "wall_secs": 18.49, "peak_rss_kb": 502052, "instructions": 83114751423, "cycles": 79377733929, "timestamp": "2026-02-08 01:28:13"}, {"id": 96, "run_id": "v1", "project": "perf-nalgebra", "mode": "vslice", "iteration": 2, "wall_secs": 18.59, "peak_rss_kb": 502124, "instructions": 83114256416, "cycles": 80034020748, "timestamp": "2026-02-08 01:28:32"}, {"id": 97, "run_id": "v1", "project": "perf-nalgebra", "mode": "vslice", "iteration": 3, "wall_secs": 18.59, "peak_rss_kb": 502276, "instructions": 83109016266, "cycles": 81754068509, "timestamp": "2026-02-08 01:28:50"}, {"id": 38, "run_id": "v1", "project": "perf-regex-automata", "mode": "baseline", "iteration": 1, "wall_secs": 8.6, "peak_rss_kb": 438044, "instructions": 103742950809, "cycles": 104299355708, "timestamp": "2026-02-08 01:08:07"}, {"id": 39, "run_id": "v1", "project": "perf-regex-automata", "mode": "baseline", "iteration": 2, "wall_secs": 8.76, "peak_rss_kb": 437904, "instructions": 103734371925, "cycles": 107171312647, "timestamp": "2026-02-08 01:08:16"}, {"id": 40, "run_id": "v1", "project": "perf-regex-automata", "mode": "baseline", "iteration": 3, "wall_secs": 8.54, "peak_rss_kb": 434492, "instructions": 103763622144, "cycles": 104410476028, "timestamp": "2026-02-08 01:08:24"}, {"id": 98, "run_id": "v1", "project": "perf-regex-automata", "mode": "vslice", "iteration": 1, "wall_secs": 9.42, "peak_rss_kb": 456488, "instructions": 108067814832, "cycles": 108039294441, "timestamp": "2026-02-08 01:29:00"}, {"id": 99, "run_id": "v1", "project": "perf-regex-automata", "mode": "vslice", "iteration": 2, "wall_secs": 9.19, "peak_rss_kb": 454684, "instructions": 108058085002, "cycles": 108007710895, "timestamp": "2026-02-08 01:29:10"}, {"id": 100, "run_id": "v1", "project": "perf-regex-automata", "mode": "vslice", "iteration": 3, "wall_secs": 9.15, "peak_rss_kb": 455488, "instructions": 108055519865, "cycles": 106567092345, "timestamp": "2026-02-08 01:29:19"}, {"id": 41, "run_id": "v1", "project": "perf-ripgrep", "mode": "baseline", "iteration": 1, "wall_secs": 17.23, "peak_rss_kb": 518068, "instructions": 305481363393, "cycles": 310849684083, "timestamp": "2026-02-08 01:08:42"}, {"id": 42, "run_id": "v1", "project": "perf-ripgrep", "mode": "baseline", "iteration": 2, "wall_secs": 14.47, "peak_rss_kb": 510380, "instructions": 305265347140, "cycles": 312775898462, "timestamp": "2026-02-08 01:08:56"}, {"id": 43, "run_id": "v1", "project": "perf-ripgrep", "mode": "baseline", "iteration": 3, "wall_secs": 14.39, "peak_rss_kb": 508740, "instructions": 305254983837, "cycles": 308232917974, "timestamp": "2026-02-08 01:09:11"}, {"id": 101, "run_id": "v1", "project": "perf-ripgrep", "mode": "vslice", "iteration": 1, "wall_secs": 16.48, "peak_rss_kb": 491268, "instructions": 311015715937, "cycles": 331246687236, "timestamp": "2026-02-08 01:29:36"}, {"id": 102, "run_id": "v1", "project": "perf-ripgrep", "mode": "vslice", "iteration": 2, "wall_secs": 16.37, "peak_rss_kb": 490448, "instructions": 311027926809, "cycles": 334961022566, "timestamp": "2026-02-08 01:29:52"}, {"id": 103, "run_id": "v1", "project": "perf-ripgrep", "mode": "vslice", "iteration": 3, "wall_secs": 15.51, "peak_rss_kb": 489624, "instructions": 311010058697, "cycles": 324020997876, "timestamp": "2026-02-08 01:30:08"}, {"id": 44, "run_id": "v1", "project": "perf-serde", "mode": "baseline", "iteration": 1, "wall_secs": 3.69, "peak_rss_kb": 282596, "instructions": 8373204225, "cycles": 8535354282, "timestamp": "2026-02-08 01:09:15"}, {"id": 45, "run_id": "v1", "project": "perf-serde", "mode": "baseline", "iteration": 2, "wall_secs": 3.94, "peak_rss_kb": 282404, "instructions": 8373715600, "cycles": 8797270185, "timestamp": "2026-02-08 01:09:19"}, {"id": 46, "run_id": "v1", "project": "perf-serde", "mode": "baseline", "iteration": 3, "wall_secs": 3.85, "peak_rss_kb": 282664, "instructions": 8373122246, "cycles": 8857436188, "timestamp": "2026-02-08 01:09:23"}, {"id": 104, "run_id": "v1", "project": "perf-serde", "mode": "vslice", "iteration": 1, "wall_secs": 4.19, "peak_rss_kb": 292596, "instructions": 9760238887, "cycles": 9823214509, "timestamp": "2026-02-08 01:30:13"}, {"id": 105, "run_id": "v1", "project": "perf-serde", "mode": "vslice", "iteration": 2, "wall_secs": 4.16, "peak_rss_kb": 292616, "instructions": 9760158879, "cycles": 9736854936, "timestamp": "2026-02-08 01:30:17"}, {"id": 106, "run_id": "v1", "project": "perf-serde", "mode": "vslice", "iteration": 3, "wall_secs": 3.96, "peak_rss_kb": 292900, "instructions": 9758951746, "cycles": 9324576217, "timestamp": "2026-02-08 01:30:21"}, {"id": 47, "run_id": "v1", "project": "perf-serde_derive", "mode": "baseline", "iteration": 1, "wall_secs": 9.02, "peak_rss_kb": 342612, "instructions": 57442328324, "cycles": 54563031935, "timestamp": "2026-02-08 01:09:33"}, {"id": 48, "run_id": "v1", "project": "perf-serde_derive", "mode": "baseline", "iteration": 2, "wall_secs": 8.21, "peak_rss_kb": 341840, "instructions": 57449700167, "cycles": 55370871947, "timestamp": "2026-02-08 01:09:41"}, {"id": 49, "run_id": "v1", "project": "perf-serde_derive", "mode": "baseline", "iteration": 3, "wall_secs": 8.05, "peak_rss_kb": 341580, "instructions": 57442582323, "cycles": 54003310740, "timestamp": "2026-02-08 01:09:49"}, {"id": 107, "run_id": "v1", "project": "perf-serde_derive", "mode": "vslice", "iteration": 1, "wall_secs": 8.65, "peak_rss_kb": 367692, "instructions": 61437224909, "cycles": 57357124963, "timestamp": "2026-02-08 01:30:30"}, {"id": 108, "run_id": "v1", "project": "perf-serde_derive", "mode": "vslice", "iteration": 2, "wall_secs": 8.32, "peak_rss_kb": 379604, "instructions": 61435061789, "cycles": 56130723313, "timestamp": "2026-02-08 01:30:39"}, {"id": 109, "run_id": "v1", "project": "perf-serde_derive", "mode": "vslice", "iteration": 3, "wall_secs": 8.3, "peak_rss_kb": 367468, "instructions": 61451417275, "cycles": 56181401267, "timestamp": "2026-02-08 01:30:47"}, {"id": 50, "run_id": "v1", "project": "perf-stm32f4", "mode": "baseline", "iteration": 1, "wall_secs": 13.75, "peak_rss_kb": 406124, "instructions": 32447382282, "cycles": 34726391153, "timestamp": "2026-02-08 01:10:03"}, {"id": 51, "run_id": "v1", "project": "perf-stm32f4", "mode": "baseline", "iteration": 2, "wall_secs": 11.38, "peak_rss_kb": 406164, "instructions": 32281813946, "cycles": 34616930952, "timestamp": "2026-02-08 01:10:15"}, {"id": 52, "run_id": "v1", "project": "perf-stm32f4", "mode": "baseline", "iteration": 3, "wall_secs": 10.99, "peak_rss_kb": 406096, "instructions": 32282412504, "cycles": 33758156190, "timestamp": "2026-02-08 01:10:26"}, {"id": 110, "run_id": "v1", "project": "perf-stm32f4", "mode": "vslice", "iteration": 1, "wall_secs": 13.18, "peak_rss_kb": 433376, "instructions": 34840263168, "cycles": 38459839055, "timestamp": "2026-02-08 01:31:01"}, {"id": 111, "run_id": "v1", "project": "perf-stm32f4", "mode": "vslice", "iteration": 2, "wall_secs": 13.2, "peak_rss_kb": 432200, "instructions": 34844194527, "cycles": 39313532589, "timestamp": "2026-02-08 01:31:14"}, {"id": 112, "run_id": "v1", "project": "perf-stm32f4", "mode": "vslice", "iteration": 3, "wall_secs": 12.96, "peak_rss_kb": 433176, "instructions": 34842111004, "cycles": 38866232018, "timestamp": "2026-02-08 01:31:27"}, {"id": 53, "run_id": "v1", "project": "perf-syn", "mode": "baseline", "iteration": 1, "wall_secs": 4.66, "peak_rss_kb": 348268, "instructions": 52442324469, "cycles": 52695494260, "timestamp": "2026-02-08 01:10:31"}, {"id": 54, "run_id": "v1", "project": "perf-syn", "mode": "baseline", "iteration": 2, "wall_secs": 4.78, "peak_rss_kb": 346184, "instructions": 52438455302, "cycles": 54386041521, "timestamp": "2026-02-08 01:10:36"}, {"id": 55, "run_id": "v1", "project": "perf-syn", "mode": "baseline", "iteration": 3, "wall_secs": 4.92, "peak_rss_kb": 348596, "instructions": 52446900151, "cycles": 53099270205, "timestamp": "2026-02-08 01:10:41"}, {"id": 113, "run_id": "v1", "project": "perf-syn", "mode": "vslice", "iteration": 1, "wall_secs": 4.79, "peak_rss_kb": 341672, "instructions": 56121368781, "cycles": 54082773200, "timestamp": "2026-02-08 01:31:33"}, {"id": 114, "run_id": "v1", "project": "perf-syn", "mode": "vslice", "iteration": 2, "wall_secs": 4.8, "peak_rss_kb": 343412, "instructions": 56129780538, "cycles": 54820307349, "timestamp": "2026-02-08 01:31:38"}, {"id": 115, "run_id": "v1", "project": "perf-syn", "mode": "vslice", "iteration": 3, "wall_secs": 4.82, "peak_rss_kb": 340884, "instructions": 56119504005, "cycles": 54509495856, "timestamp": "2026-02-08 01:31:43"}, {"id": 56, "run_id": "v1", "project": "perf-typenum", "mode": "baseline", "iteration": 1, "wall_secs": 1.26, "peak_rss_kb": 151680, "instructions": 3020136736, "cycles": 2469828462, "timestamp": "2026-02-08 01:10:43"}, {"id": 57, "run_id": "v1", "project": "perf-typenum", "mode": "baseline", "iteration": 2, "wall_secs": 1.15, "peak_rss_kb": 150392, "instructions": 3020555130, "cycles": 2396873762, "timestamp": "2026-02-08 01:10:44"}, {"id": 58, "run_id": "v1", "project": "perf-typenum", "mode": "baseline", "iteration": 3, "wall_secs": 1.13, "peak_rss_kb": 151732, "instructions": 3020528740, "cycles": 2330900482, "timestamp": "2026-02-08 01:10:46"}, {"id": 116, "run_id": "v1", "project": "perf-typenum", "mode": "vslice", "iteration": 1, "wall_secs": 1.21, "peak_rss_kb": 167316, "instructions": 3380828453, "cycles": 2538678858, "timestamp": "2026-02-08 01:31:44"}, {"id": 117, "run_id": "v1", "project": "perf-typenum", "mode": "vslice", "iteration": 2, "wall_secs": 1.23, "peak_rss_kb": 167332, "instructions": 3380419949, "cycles": 2589398296, "timestamp": "2026-02-08 01:31:45"}, {"id": 118, "run_id": "v1", "project": "perf-typenum", "mode": "vslice", "iteration": 3, "wall_secs": 1.24, "peak_rss_kb": 167244, "instructions": 3380650288, "cycles": 2619717019, "timestamp": "2026-02-08 01:31:47"}, {"id": 59, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "baseline", "iteration": 1, "wall_secs": 2.04, "peak_rss_kb": 165344, "instructions": 5178428670, "cycles": 3734176689, "timestamp": "2026-02-08 01:10:48"}, {"id": 60, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "baseline", "iteration": 2, "wall_secs": 1.79, "peak_rss_kb": 165384, "instructions": 5178419577, "cycles": 3848524610, "timestamp": "2026-02-08 01:10:50"}, {"id": 61, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "baseline", "iteration": 3, "wall_secs": 1.69, "peak_rss_kb": 166132, "instructions": 5178183446, "cycles": 3828026443, "timestamp": "2026-02-08 01:10:52"}, {"id": 119, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "vslice", "iteration": 1, "wall_secs": 1.94, "peak_rss_kb": 168504, "instructions": 5410053731, "cycles": 3928924460, "timestamp": "2026-02-08 01:31:49"}, {"id": 120, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "vslice", "iteration": 2, "wall_secs": 1.82, "peak_rss_kb": 168516, "instructions": 5410119367, "cycles": 4119354055, "timestamp": "2026-02-08 01:31:51"}, {"id": 121, "run_id": "v1", "project": "perf-unicode-normalization", "mode": "vslice", "iteration": 3, "wall_secs": 1.74, "peak_rss_kb": 168120, "instructions": 5410183392, "cycles": 3924163696, "timestamp": "2026-02-08 01:31:53"}];

// Compute averages grouped by (run_id, project, mode)
function computeAverages(data) {
  const groups = {};
  for (const row of data) {
    const key = `${row.run_id}|${row.project}|${row.mode}`;
    if (!groups[key]) groups[key] = { ...row, _count: 0, wall_secs: 0, peak_rss_kb: 0, instructions: 0, cycles: 0 };
    const g = groups[key];
    g._count++;
    if (row.wall_secs != null) g.wall_secs += row.wall_secs;
    if (row.peak_rss_kb != null) g.peak_rss_kb += row.peak_rss_kb;
    if (row.instructions != null) g.instructions += row.instructions;
    if (row.cycles != null) g.cycles += row.cycles;
  }
  return Object.values(groups).map(g => ({
    run_id: g.run_id, project: g.project, mode: g.mode, n: g._count,
    wall_secs: g.wall_secs / g._count,
    peak_rss_kb: g.peak_rss_kb / g._count,
    instructions: g.instructions / g._count,
    cycles: g.cycles / g._count,
  }));
}

const averages = computeAverages(DATA);
const runIds = [...new Set(DATA.map(r => r.run_id))].sort();
const modes = [...new Set(DATA.map(r => r.mode))].sort();

// Populate dropdowns
function populateSelect(id, values, selectedValue) {
  const sel = document.getElementById(id);
  sel.innerHTML = '';
  values.forEach(v => {
    const opt = document.createElement('option');
    opt.value = v; opt.textContent = v;
    if (v === selectedValue) opt.selected = true;
    sel.appendChild(opt);
  });
}

populateSelect('sel-run', runIds, runIds[runIds.length - 1]);
populateSelect('sel-base-mode', modes, modes.includes('baseline') ? 'baseline' : modes[0]);
populateSelect('sel-comp-mode', modes, modes.find(m => m !== 'baseline') || modes[modes.length > 1 ? 1 : 0]);

function pctClass(pct) {
  if (pct == null || isNaN(pct)) return 'neutral';
  if (pct < -2) return 'good-bold';
  if (pct < 0) return 'good';
  if (pct > 2) return 'bad-bold';
  if (pct > 0) return 'bad';
  return 'neutral';
}

function fmtPct(pct) {
  if (pct == null || isNaN(pct)) return '-';
  return (pct >= 0 ? '+' : '') + pct.toFixed(2) + '%';
}

function fmtWall(v) { return v != null ? v.toFixed(1) + 's' : '-'; }
function fmtRss(kb) { return kb ? (kb / 1024).toFixed(0) + ' MB' : '-'; }
function fmtInsn(v) { return v ? (v / 1e9).toFixed(2) + ' B' : '-'; }
function fmtCycles(v) { return v ? (v / 1e9).toFixed(2) + ' B' : '-'; }

function computeDelta(a, b) {
  if (a == null || b == null || a === 0) return null;
  return (b - a) / a * 100;
}

function geoMean(values) {
  const valid = values.filter(v => v != null && !isNaN(v) && isFinite(v));
  if (valid.length === 0) return null;
  const product = valid.reduce((acc, v) => acc * (1 + v / 100), 1);
  return (Math.pow(product, 1 / valid.length) - 1) * 100;
}

function render() {
  const runId = document.getElementById('sel-run').value;
  const baseMode = document.getElementById('sel-base-mode').value;
  const compMode = document.getElementById('sel-comp-mode').value;
  const sortMetric = document.getElementById('sel-sort').value;

  // Build lookup: project -> data for each mode
  const baseMap = {};
  const compMap = {};
  for (const r of averages) {
    if (r.run_id !== runId) continue;
    if (r.mode === baseMode) baseMap[r.project] = r;
    if (r.mode === compMode) compMap[r.project] = r;
  }

  const projects = [...new Set([...Object.keys(baseMap), ...Object.keys(compMap)])].sort();

  if (projects.length === 0) {
    document.getElementById('results').innerHTML = '<div class="no-data">No matching data. Select a different run or mode.</div>';
    document.getElementById('summary-bar').innerHTML = '';
    return;
  }

  // Compute deltas for all projects
  const rows = projects.map(project => {
    const b = baseMap[project];
    const c = compMap[project];
    return {
      project,
      n: b?.n || c?.n || 0,
      baseWall: b?.wall_secs, compWall: c?.wall_secs, wallDelta: computeDelta(b?.wall_secs, c?.wall_secs),
      baseRss: b?.peak_rss_kb, compRss: c?.peak_rss_kb, rssDelta: computeDelta(b?.peak_rss_kb, c?.peak_rss_kb),
      baseInsn: b?.instructions, compInsn: c?.instructions, insnDelta: computeDelta(b?.instructions, c?.instructions),
      baseCycles: b?.cycles, compCycles: c?.cycles, cyclesDelta: computeDelta(b?.cycles, c?.cycles),
    };
  });

  // Sort by selected metric delta (largest regression first)
  const deltaKey = { wall: 'wallDelta', insn: 'insnDelta', cycles: 'cyclesDelta', rss: 'rssDelta' }[sortMetric] || 'insnDelta';
  rows.sort((a, b) => {
    const ad = a[deltaKey] ?? 0, bd = b[deltaKey] ?? 0;
    return bd - ad; // largest positive (regression) first
  });

  const wallDeltas = rows.map(r => r.wallDelta);
  const rssDeltas = rows.map(r => r.rssDelta);
  const insnDeltas = rows.map(r => r.insnDelta);
  const cyclesDeltas = rows.map(r => r.cyclesDelta);

  let html = '<table><thead><tr>';
  html += '<th>Benchmark</th><th>N</th>';
  html += `<th>Wall (${baseMode})</th><th>Wall (${compMode})</th><th>Wall Δ%</th>`;
  html += `<th>Insn (${baseMode})</th><th>Insn (${compMode})</th><th>Insn Δ%</th>`;
  html += `<th>Cycles (${baseMode})</th><th>Cycles (${compMode})</th><th>Cycles Δ%</th>`;
  html += `<th>RSS (${baseMode})</th><th>RSS (${compMode})</th><th>RSS Δ%</th>`;
  html += '</tr></thead><tbody>';

  for (const r of rows) {
    html += '<tr>';
    html += `<td class="project-name">${r.project}</td>`;
    html += `<td class="num">${r.n}</td>`;
    html += `<td class="num">${fmtWall(r.baseWall)}</td>`;
    html += `<td class="num">${fmtWall(r.compWall)}</td>`;
    html += `<td class="pct ${pctClass(r.wallDelta)}">${fmtPct(r.wallDelta)}</td>`;
    html += `<td class="num">${fmtInsn(r.baseInsn)}</td>`;
    html += `<td class="num">${fmtInsn(r.compInsn)}</td>`;
    html += `<td class="pct ${pctClass(r.insnDelta)}">${fmtPct(r.insnDelta)}</td>`;
    html += `<td class="num">${fmtCycles(r.baseCycles)}</td>`;
    html += `<td class="num">${fmtCycles(r.compCycles)}</td>`;
    html += `<td class="pct ${pctClass(r.cyclesDelta)}">${fmtPct(r.cyclesDelta)}</td>`;
    html += `<td class="num">${fmtRss(r.baseRss)}</td>`;
    html += `<td class="num">${fmtRss(r.compRss)}</td>`;
    html += `<td class="pct ${pctClass(r.rssDelta)}">${fmtPct(r.rssDelta)}</td>`;
    html += '</tr>';
  }

  // Geometric mean row
  const gWall = geoMean(wallDeltas);
  const gInsn = geoMean(insnDeltas);
  const gCycles = geoMean(cyclesDeltas);
  const gRss = geoMean(rssDeltas);

  html += '<tr class="geo-row">';
  html += '<td>Geometric Mean</td><td></td>';
  html += `<td></td><td></td><td class="pct ${pctClass(gWall)}">${fmtPct(gWall)}</td>`;
  html += `<td></td><td></td><td class="pct ${pctClass(gInsn)}">${fmtPct(gInsn)}</td>`;
  html += `<td></td><td></td><td class="pct ${pctClass(gCycles)}">${fmtPct(gCycles)}</td>`;
  html += `<td></td><td></td><td class="pct ${pctClass(gRss)}">${fmtPct(gRss)}</td>`;
  html += '</tr>';

  html += '</tbody></table>';
  document.getElementById('results').innerHTML = html;

  // Summary bar
  let s = '';
  s += `<div class="summary-item"><div class="label">Benchmarks</div><div class="value">${projects.length}</div></div>`;
  s += `<div class="summary-item"><div class="label">Wall Time (geo)</div><div class="value ${pctClass(gWall)}">${fmtPct(gWall)}</div></div>`;
  s += `<div class="summary-item"><div class="label">Instructions (geo)</div><div class="value ${pctClass(gInsn)}">${fmtPct(gInsn)}</div></div>`;
  s += `<div class="summary-item"><div class="label">Cycles (geo)</div><div class="value ${pctClass(gCycles)}">${fmtPct(gCycles)}</div></div>`;
  s += `<div class="summary-item"><div class="label">Peak RSS (geo)</div><div class="value ${pctClass(gRss)}">${fmtPct(gRss)}</div></div>`;
  document.getElementById('summary-bar').innerHTML = s;
}

document.getElementById('sel-run').addEventListener('change', render);
document.getElementById('sel-base-mode').addEventListener('change', render);
document.getElementById('sel-comp-mode').addEventListener('change', render);
document.getElementById('sel-sort').addEventListener('change', render);

render();
</script>
</body>
</html>